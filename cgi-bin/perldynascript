#!/usr/bin/perl

#use strict;

# build a hash of arrays
%myhash = ();

# populate with cities by state
#push(@{$myhash{"north dakota"}}, "fargo");
#push(@myhash{"north dakota"}, "west fargo");
#push(@myhash{"minnesota"}, "moorhead");
#push(@myhash{"minnesota"}, "dilworth");
@myhash{"north dakota"} = [ "fargo", "west fargo"];
@myhash{"minnesota"} = [ "dilworth", "moorhead"];

#$city = ${$myhash{"north dakota"}}[1];

## HTTP header
print "Content-type: text/html; charset=iso-8859-1\n\n";

## HTTP body

# html 
print "<html>\n";

# html head
print "<head>\n";

# dynamically create json objects for use in js.js
print "<script type=\"text/javascript\">\n";

# object
# geo[0] = { state : "name", cities : [ cities ]}

print "var geo = [];\n";
for $state (keys %myhash)
{
	print "var tmpstate = { state: \"$state\", cities: [] };\n";
	for $city (@{$myhash{$state}})
	{
		print "tmpstate.cities.push(\"$city\");\n";
	}
	print "geo.push(tmpstate);\n";
}

print "</script>\n";

print "<script src=\"/js.js\"></script>\n";

print "</head>\n";

# html body
print "<body>\n";

print "<p>\n";
print "<div id=bob>hi!</div>\n";
print "<br>\n";
print "<br>\n";

print "</body>\n";

print "</html>\n";


exit(0);
